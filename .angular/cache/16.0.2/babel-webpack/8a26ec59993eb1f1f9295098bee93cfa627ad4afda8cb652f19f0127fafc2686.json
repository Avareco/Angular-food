{"ast":null,"code":"import { createReducer, on } from \"@ngrx/store\";\nimport { addToCart, removeFromCart, setCart } from \"./cart.actions\";\nconst initialState = {\n  cart: []\n};\nexport const cartReducer = createReducer(initialState, on(setCart, (state, action) => {\n  //TODO console.log(action)\n  return {\n    ...state,\n    cart: action.value\n  };\n}), on(addToCart, (state, action) => {\n  const cartMealIndex = state.cart.findIndex(item => item.id === action.value);\n  if (cartMealIndex >= 0) {\n    const updatedCart = state.cart.map(item => item.id === action.value ? {\n      ...item,\n      count: item.count + 1\n    } : item);\n    return {\n      ...state,\n      cart: updatedCart\n    };\n  }\n  return {\n    ...state,\n    cart: [...state.cart, {\n      id: action.value,\n      count: 1\n    }]\n  };\n}), on(removeFromCart, (state, action) => {\n  const cartMeal = state.cart.find(item => item.id === action.value);\n  if (cartMeal?.count ?? 0 >= 1) {\n    const updatedCart = state.cart.map(item => item.id === action.value ? {\n      ...item,\n      count: item.count - 1\n    } : item);\n    return {\n      ...state,\n      cart: updatedCart\n    };\n  }\n  return {\n    ...state,\n    cart: state.cart.filter(item => item.id !== action.value)\n  };\n}));","map":{"version":3,"names":["createReducer","on","addToCart","removeFromCart","setCart","initialState","cart","cartReducer","state","action","value","cartMealIndex","findIndex","item","id","updatedCart","map","count","cartMeal","find","filter"],"sources":["C:\\Users\\andrii.yakovliev\\Desktop\\projects\\2024\\udemy\\ANGULAR_COURSE\\01-starting-setup-standalone\\src\\app\\store\\cart\\cart.reducer.ts"],"sourcesContent":["import {createReducer, on} from \"@ngrx/store\";\r\nimport {addToCart, removeFromCart, setCart} from \"./cart.actions\";\r\n\r\nexport interface ICart {\r\n  id: string,\r\n  count: number\r\n}\r\n\r\nexport interface ICartStore {\r\n  cart: ICart[]\r\n}\r\n\r\nconst initialState: ICartStore = {\r\n  cart: [],\r\n}\r\nexport const cartReducer = createReducer(initialState,\r\n  on(setCart, (state, action) => {\r\n    //TODO console.log(action)\r\n    return {...state, cart: action.value}\r\n  }),\r\n  on(addToCart, (state, action) => {\r\n    const cartMealIndex = state.cart.findIndex((item) => item.id === action.value)\r\n\r\n    if (cartMealIndex >= 0) {\r\n      const updatedCart = state.cart.map(item =>\r\n        item.id === action.value\r\n          ? {...item, count: item.count + 1}\r\n          : item\r\n      );\r\n      return {...state, cart: updatedCart};\r\n    }\r\n\r\n    return {...state, cart: [...state.cart, {id: action.value, count: 1}]}\r\n  }),\r\n  on(removeFromCart, (state, action) => {\r\n    const cartMeal = state.cart.find((item) => item.id === action.value)\r\n\r\n    if (cartMeal?.count ?? 0 >= 1) {\r\n      const updatedCart = state.cart.map(item =>\r\n        item.id === action.value\r\n          ? {...item, count: item.count - 1}\r\n          : item\r\n      );\r\n      return {...state, cart: updatedCart};\r\n    }\r\n\r\n    return {\r\n      ...state, cart: state.cart.filter((item) => item.id !== action.value)\r\n    }\r\n  })\r\n)\r\n"],"mappings":"AAAA,SAAQA,aAAa,EAAEC,EAAE,QAAO,aAAa;AAC7C,SAAQC,SAAS,EAAEC,cAAc,EAAEC,OAAO,QAAO,gBAAgB;AAWjE,MAAMC,YAAY,GAAe;EAC/BC,IAAI,EAAE;CACP;AACD,OAAO,MAAMC,WAAW,GAAGP,aAAa,CAACK,YAAY,EACnDJ,EAAE,CAACG,OAAO,EAAE,CAACI,KAAK,EAAEC,MAAM,KAAI;EAC5B;EACA,OAAO;IAAC,GAAGD,KAAK;IAAEF,IAAI,EAAEG,MAAM,CAACC;EAAK,CAAC;AACvC,CAAC,CAAC,EACFT,EAAE,CAACC,SAAS,EAAE,CAACM,KAAK,EAAEC,MAAM,KAAI;EAC9B,MAAME,aAAa,GAAGH,KAAK,CAACF,IAAI,CAACM,SAAS,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKL,MAAM,CAACC,KAAK,CAAC;EAE9E,IAAIC,aAAa,IAAI,CAAC,EAAE;IACtB,MAAMI,WAAW,GAAGP,KAAK,CAACF,IAAI,CAACU,GAAG,CAACH,IAAI,IACrCA,IAAI,CAACC,EAAE,KAAKL,MAAM,CAACC,KAAK,GACpB;MAAC,GAAGG,IAAI;MAAEI,KAAK,EAAEJ,IAAI,CAACI,KAAK,GAAG;IAAC,CAAC,GAChCJ,IAAI,CACT;IACD,OAAO;MAAC,GAAGL,KAAK;MAAEF,IAAI,EAAES;IAAW,CAAC;;EAGtC,OAAO;IAAC,GAAGP,KAAK;IAAEF,IAAI,EAAE,CAAC,GAAGE,KAAK,CAACF,IAAI,EAAE;MAACQ,EAAE,EAAEL,MAAM,CAACC,KAAK;MAAEO,KAAK,EAAE;IAAC,CAAC;EAAC,CAAC;AACxE,CAAC,CAAC,EACFhB,EAAE,CAACE,cAAc,EAAE,CAACK,KAAK,EAAEC,MAAM,KAAI;EACnC,MAAMS,QAAQ,GAAGV,KAAK,CAACF,IAAI,CAACa,IAAI,CAAEN,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKL,MAAM,CAACC,KAAK,CAAC;EAEpE,IAAIQ,QAAQ,EAAED,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE;IAC7B,MAAMF,WAAW,GAAGP,KAAK,CAACF,IAAI,CAACU,GAAG,CAACH,IAAI,IACrCA,IAAI,CAACC,EAAE,KAAKL,MAAM,CAACC,KAAK,GACpB;MAAC,GAAGG,IAAI;MAAEI,KAAK,EAAEJ,IAAI,CAACI,KAAK,GAAG;IAAC,CAAC,GAChCJ,IAAI,CACT;IACD,OAAO;MAAC,GAAGL,KAAK;MAAEF,IAAI,EAAES;IAAW,CAAC;;EAGtC,OAAO;IACL,GAAGP,KAAK;IAAEF,IAAI,EAAEE,KAAK,CAACF,IAAI,CAACc,MAAM,CAAEP,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKL,MAAM,CAACC,KAAK;GACrE;AACH,CAAC,CAAC,CACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}