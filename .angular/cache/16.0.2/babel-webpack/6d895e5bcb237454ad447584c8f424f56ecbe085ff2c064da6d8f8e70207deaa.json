{"ast":null,"code":"import { createReducer, on } from \"@ngrx/store\";\nimport { setCart } from \"./cart.actions\";\nconst initialState = {\n  cart: []\n};\nexport const cartReducer = createReducer(initialState, on(setCart, (state, action) => {\n  //TODO console.log(action)\n  return {\n    ...state,\n    cart: action.value\n  };\n}), on(addMealToCart, (state, action) => {\n  const cartMealIndex = state.cart.findIndex(item => item.id === action.value);\n  if (cartMealIndex >= 0) {\n    const updatedCart = state.cart.map(item => item.id === action.value ? {\n      ...item,\n      count: item.count + 1\n    } : item);\n    return {\n      ...state,\n      cart: updatedCart\n    };\n  }\n  return {\n    ...state,\n    cart: [...state.cart, {\n      id: action.value,\n      count: 1\n    }]\n  };\n}), on(removeCartMeal, (state, action) => {\n  const cartMealIndex = state.cart.findIndex(item => item.id === action.value);\n  if (cartMealIndex >= 0) {\n    const updatedCart = state.cart.map(item => item.id === action.value ? {\n      ...item,\n      count: item.count + 1\n    } : item);\n    return {\n      ...state,\n      cart: updatedCart\n    };\n  }\n  return {\n    ...state,\n    cart: [...state.cart, {\n      id: action.value,\n      count: 1\n    }]\n  };\n}));","map":{"version":3,"names":["createReducer","on","setCart","initialState","cart","cartReducer","state","action","value","addMealToCart","cartMealIndex","findIndex","item","id","updatedCart","map","count","removeCartMeal"],"sources":["C:\\Users\\andrii.yakovliev\\Desktop\\projects\\2024\\udemy\\ANGULAR_COURSE\\01-starting-setup-standalone\\src\\app\\store\\cart\\cart.reducer.ts"],"sourcesContent":["import {createReducer, on} from \"@ngrx/store\";\r\nimport {setCart, updateCart} from \"./cart.actions\";\r\n\r\nexport interface ICart {\r\n  id: string,\r\n  count: number\r\n}\r\n\r\nexport interface ICartStore {\r\n  cart: ICart[]\r\n}\r\n\r\nconst initialState: ICartStore = {\r\n  cart: [],\r\n}\r\nexport const cartReducer = createReducer(initialState,\r\n  on(setCart, (state, action) => {\r\n    //TODO console.log(action)\r\n    return {...state, cart: action.value}\r\n  }),\r\n  on(addMealToCart, (state, action) => {\r\n    const cartMealIndex = state.cart.findIndex((item) => item.id === action.value)\r\n\r\n    if (cartMealIndex >= 0) {\r\n      const updatedCart = state.cart.map(item =>\r\n        item.id === action.value\r\n          ? {...item, count: item.count + 1}\r\n          : item\r\n      );\r\n      return {...state, cart: updatedCart};\r\n    }\r\n\r\n    return {...state, cart: [...state.cart, {id: action.value, count: 1}]}\r\n  }),\r\n  on(removeCartMeal, (state, action) => {\r\n    const cartMealIndex = state.cart.findIndex((item) => item.id === action.value)\r\n\r\n    if (cartMealIndex >= 0) {\r\n      const updatedCart = state.cart.map(item =>\r\n        item.id === action.value\r\n          ? {...item, count: item.count + 1}\r\n          : item\r\n      );\r\n      return {...state, cart: updatedCart};\r\n    }\r\n\r\n    return {...state, cart: [...state.cart, {id: action.value, count: 1}]}\r\n  })\r\n)\r\n"],"mappings":"AAAA,SAAQA,aAAa,EAAEC,EAAE,QAAO,aAAa;AAC7C,SAAQC,OAAO,QAAmB,gBAAgB;AAWlD,MAAMC,YAAY,GAAe;EAC/BC,IAAI,EAAE;CACP;AACD,OAAO,MAAMC,WAAW,GAAGL,aAAa,CAACG,YAAY,EACnDF,EAAE,CAACC,OAAO,EAAE,CAACI,KAAK,EAAEC,MAAM,KAAI;EAC5B;EACA,OAAO;IAAC,GAAGD,KAAK;IAAEF,IAAI,EAAEG,MAAM,CAACC;EAAK,CAAC;AACvC,CAAC,CAAC,EACFP,EAAE,CAACQ,aAAa,EAAE,CAACH,KAAK,EAAEC,MAAM,KAAI;EAClC,MAAMG,aAAa,GAAGJ,KAAK,CAACF,IAAI,CAACO,SAAS,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKN,MAAM,CAACC,KAAK,CAAC;EAE9E,IAAIE,aAAa,IAAI,CAAC,EAAE;IACtB,MAAMI,WAAW,GAAGR,KAAK,CAACF,IAAI,CAACW,GAAG,CAACH,IAAI,IACrCA,IAAI,CAACC,EAAE,KAAKN,MAAM,CAACC,KAAK,GACpB;MAAC,GAAGI,IAAI;MAAEI,KAAK,EAAEJ,IAAI,CAACI,KAAK,GAAG;IAAC,CAAC,GAChCJ,IAAI,CACT;IACD,OAAO;MAAC,GAAGN,KAAK;MAAEF,IAAI,EAAEU;IAAW,CAAC;;EAGtC,OAAO;IAAC,GAAGR,KAAK;IAAEF,IAAI,EAAE,CAAC,GAAGE,KAAK,CAACF,IAAI,EAAE;MAACS,EAAE,EAAEN,MAAM,CAACC,KAAK;MAAEQ,KAAK,EAAE;IAAC,CAAC;EAAC,CAAC;AACxE,CAAC,CAAC,EACFf,EAAE,CAACgB,cAAc,EAAE,CAACX,KAAK,EAAEC,MAAM,KAAI;EACnC,MAAMG,aAAa,GAAGJ,KAAK,CAACF,IAAI,CAACO,SAAS,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKN,MAAM,CAACC,KAAK,CAAC;EAE9E,IAAIE,aAAa,IAAI,CAAC,EAAE;IACtB,MAAMI,WAAW,GAAGR,KAAK,CAACF,IAAI,CAACW,GAAG,CAACH,IAAI,IACrCA,IAAI,CAACC,EAAE,KAAKN,MAAM,CAACC,KAAK,GACpB;MAAC,GAAGI,IAAI;MAAEI,KAAK,EAAEJ,IAAI,CAACI,KAAK,GAAG;IAAC,CAAC,GAChCJ,IAAI,CACT;IACD,OAAO;MAAC,GAAGN,KAAK;MAAEF,IAAI,EAAEU;IAAW,CAAC;;EAGtC,OAAO;IAAC,GAAGR,KAAK;IAAEF,IAAI,EAAE,CAAC,GAAGE,KAAK,CAACF,IAAI,EAAE;MAACS,EAAE,EAAEN,MAAM,CAACC,KAAK;MAAEQ,KAAK,EAAE;IAAC,CAAC;EAAC,CAAC;AACxE,CAAC,CAAC,CACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}